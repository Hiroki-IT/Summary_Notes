

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ネットワークの仕組み &mdash; sphinx-tech-notebook 1.0.0 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="オンプレミスとクラウドコンピューティング" href="OnPremisesAndCloudComputing.html" />
    <link rel="prev" title="暗号化技術" href="EncryptionTechnology.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> sphinx-tech-notebook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">はじめに：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AboutThisSite.html">このサイトについて</a></li>
</ul>
<p class="caption"><span class="caption-text">PHP：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ObjectOrientedAnalysisAndDesign.html">オブジェクト指向分析と設計</a></li>
<li class="toctree-l1"><a class="reference internal" href="ObjectOrientedProgramming.html">オブジェクト指向プログラミング</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConceptAndImplementationOfRESTfulAPI.html">RESTful APIの概念と実装</a></li>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">テストの手法</a></li>
<li class="toctree-l1"><a class="reference internal" href="FrameworkAndLibrary.html">フレームワークとライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="MainAlgorithm.html">代表的なアルゴリズム</a></li>
</ul>
<p class="caption"><span class="caption-text">アーキテクチャ：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="DomainDrivenDesign.html">ドメイン駆動設計</a></li>
<li class="toctree-l1"><a class="reference internal" href="CQRS.html">CQRS</a></li>
</ul>
<p class="caption"><span class="caption-text">データベース：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OperatingDatabase.html">データベースの操作</a></li>
</ul>
<p class="caption"><span class="caption-text">セキュリティ：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MalwareAndCyberAttacks.html">Malwareとサイバー攻撃</a></li>
<li class="toctree-l1"><a class="reference internal" href="EncryptionTechnology.html">暗号化技術</a></li>
</ul>
<p class="caption"><span class="caption-text">ネットワーク：</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ネットワークの仕組み</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">01-01. ネットワークの全体像</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-wan-lan">:pushpin: インターネット，WAN，LAN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">:pushpin: WAN，LANの具体例</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-wan">:pushpin: WANの種類と歴史</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin">:pushpin: グローバルネットワークとプライベートネットワーク</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">:pushpin: プライベートネットワークにおけるセグメント</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">・非武装地帯に設置するべきサーバの種類</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">・内部ネットワークに設置するべきサーバの種類</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">:pushpin: ネットワークにおけるデータ通信方法の種類</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">・回線交換方式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">・パケット交換方式</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ositcp">02-01. OSI参照モデルとTCP階層モデル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">:pushpin: データの作成，ヘッダ情報追加，カプセル化</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-osi">:pushpin: OSI参照モデルにおいて各概念層で追加されるヘッダ情報の内容</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">:pushpin: プロトコルの分類と扱われる階層</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">02-02. 通信機器におけるヘッダ情報認識</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">:pushpin: 各概念層の実際の通信機器の対応関係</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">・ネットワーク層</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">・データリンク層</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">・物理層</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id17">:pushpin: 通信機器における各層のヘッダ情報の認識</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">02-03. アプリケーション層におけるデータ（メッセージ）の作成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-url">:pushpin: URLとメールアドレスの構造</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">・各部品の名称</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">・完全修飾ドメイン名とサーバー中継</a></li>
<li class="toctree-l4"><a class="reference internal" href="#url">・URLにおけるパスパラメータとクエリパラメータの使い分け</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">・各部品の様々な組み合わせ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-restful-api">:pushpin: RESTful APIに対するリクエストメッセージの構造</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get">・GET送信の場合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post">・POST送信の場合</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">・例外として，ボディをもつGET送信の場合</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-soap-api">:pushpin: （補足）SOAP APIに対するリクエストメッセージの構造</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">・POST送信の場合</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id24">:pushpin: レスポンスメッセージの構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-http">:pushpin: HTTPステータスの種類</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id25">・100番台：継続</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">・200番台：リクエスト成功</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">・300番台：リダイレクトに関するステータス</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">・400番台：リクエスト失敗</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">・500番台：サーバーエラー</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id30">02-04. アプリケーション層におけるメールデータの作成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id31">:pushpin: メール送信用プロトコル</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#smtp-auth-simple-mail-transfer-protocol-authentication">・SMTP AUTH：Simple Mail Transfer Protocol AUTHentication**</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id32">:pushpin: メール受信用プロトコル</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pop3-post-official-protocol-version-3">・POP3：Post Official Protocol version 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#imap4-internet-message-access-protocol-version-3">・IMAP4：Internet Message Access Protocol version 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apop-authenticated-pop">・APOP：Authenticated POP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id33">02-05. トランスポート層におけるヘッダ情報追加</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-tcp">:pushpin: TCPによるヘッダ情報の追加と識別の仕組み</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id34">・リクエスト時（図の右矢印）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">・レスポンス時（図の左矢印）</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id36">:pushpin: ポートスキャナ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">:pushpin: ポート番号の種類</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#well-known-0-1023">・Well known ポート番号（0 ～ 1023）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">・登録済みポート番号（1024 ～ 49151）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">・動的／非公式ポート番号（49152 ～ 65535）</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id40">02-06. インターネット層におけるヘッダ情報追加</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-ip">:pushpin: IPパケットのヘッダ情報を用いた宛先認識</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-ipv4">:pushpin: IPv4アドレスの種類</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ip">・プライベートIPアドレス</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">・グローバルIPアドレス</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-ipbit">:pushpin: プライベート／グローバルIPアドレスとbitとの関係</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">:pushpin: プライベート／グローバルIPアドレスのネットワーク部とホスト部</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id43">・クラスによるホスト部とネットワーク部の定義</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44">・サブネットマスクよるネットワーク部とホスト部の定義</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-dnshosts">:pushpin: DNSサーバとhostsファイルの役割</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id45">・完全修飾ドメイン名とグローバルIPアドレスのマッピング</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hosts">・hostsファイル</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id46">02-07. ルータの種類</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-nat-nat-network-address-translationipv4">:pushpin: NAT（静的NAT）：Network Address TranslationによるIPアドレスv4の変換</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id47">・リクエスト時のルータにおける変換</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id48">・レスポンス時の変換</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-napt-nat-network-address-port-translationip">:pushpin: NAPT（動的NAT）：Network Address Port TranslationによるIPアドレスとポート番号の変換</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id49">・リクエスト時の変換</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">・レスポンス時の変換</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#web3">03-01. Webシステムを構成する主要な3層構造</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-webweb">:pushpin: WebサーバソフトウェアをもつWebサーバ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#server">・サーバ変数（<code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code>）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request">・リクエスト変数（<code class="docutils literal notranslate"><span class="pre">$_REQUEST</span></code>）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session">・セッション変数（<code class="docutils literal notranslate"><span class="pre">$_SESSION</span></code>）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#symfony">・Symfonyフレームワークによる各変数の取得</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-apap">:pushpin: APサーバソフトウェアをもつAPサーバ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-db">:pushpin: データベース管理システムをもつDBサーバ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">:pushpin: サーバの処理能力向上</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id52">・スケールアップ ⇔ スケールダウン</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id53">・スケールアウト ⇔ スケールイン</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#web">03-02. Webシステムの構成方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-dual">:pushpin: Dualシステム</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-duplex">:pushpin: Duplexシステム</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id54">・ホットスタンバイ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55">・コールドスタンバイ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id56">:pushpin: システムの稼働率</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#web-api">03-03. Web API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id57">:pushpin: RESTful API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id58">:pushpin: SOAP API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id59">03-04. サーバ間のリクエストとレスポンス</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id60">:pushpin: サーバ間のデータ通信に要する時間</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-proxy">:pushpin: フォワード／リバースProxyサーバの役割</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id61">・代理リクエスト機能（セキュリティのノートも参照）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id62">・キャッシュ機能</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id63">:pushpin: フォワード／リバースProxyサーバの設置場所</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-proxy-dns-web">:pushpin: フォワード／リバースProxyサーバ，DNSサーバ，Webサーバによる名前解決</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id64">・（1）完全修飾ドメイン名に対応するIPアドレスのレスポンス</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipweb">・（2）IPアドレスに対応するWebページのレスポンス</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cookie-id">03-05. キャッシュ，Cookie，セッションID</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id65">:pushpin: キャッシュ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#proxy">・リバースProxyサーバによるキャッシュ機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id66">・ブラウザによるキャッシュ機能</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-cookiecookie">:pushpin: CookieプロトコルによるCookie情報の送受信</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cookie">・Cookie情報の送受信の仕組み</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-cookieid">:pushpin: CookieプロトコルによるセッションIDの送受信</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id">・セッションIDの送受信の仕組み</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">・セッションID送受信とページ遷移</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OnPremisesAndCloudComputing.html">オンプレミスとクラウドコンピューティング</a></li>
</ul>
<p class="caption"><span class="caption-text">仮想化技術：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ComparisonOfVirtualizationTechnologies.html">仮想化技術の比較</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreationOfVirtualServer(VirtualMachine)AndContainer.html">仮想サーバ(仮想マシン)とコンテナの構築</a></li>
</ul>
<p class="caption"><span class="caption-text">ソフトウェアとハードウェアの連携：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="WhatIsSoftware.html">ソフトウェアとは</a></li>
<li class="toctree-l1"><a class="reference internal" href="WhatIsHardware.html">ハードウェアとは</a></li>
</ul>
<p class="caption"><span class="caption-text">ハードウェアに対する命令：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MachineLanguageAndRadix.html">機械語と進数</a></li>
</ul>
<p class="caption"><span class="caption-text">組み込み機器：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="EmbeddedSystem.html">組み込み機器</a></li>
</ul>
<p class="caption"><span class="caption-text">システム開発：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="SystemDevelopmentFlow.html">システム開発の流れ</a></li>
</ul>
<p class="caption"><span class="caption-text">JavaScript：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="PrototypeBasedObjectOriented.html">プロトタイプベースのオブジェクト指向</a></li>
<li class="toctree-l1"><a class="reference internal" href="ImplementationOnTheFrontSide.html">イベント発火 〜 Webページ表示</a></li>
</ul>
<p class="caption"><span class="caption-text">R言語：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="StatisticalAnalysis.html">統計解析</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sphinx-tech-notebook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ネットワークの仕組み</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/HowTheInternetWorks.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>ネットワークの仕組み<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="id2">
<h2>01-01. ネットワークの全体像<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-wan-lan">
<h3>:pushpin: インターネット，WAN，LAN<a class="headerlink" href="#pushpin-wan-lan" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ネットワークには，『インターネット』『WAN』『LAN』がある．家庭内LAN，学内LAN，企業内LAN，企業WANなど，さまざまなネットワークがあり，インターネットは，それぞれのネットワークを互いに接続しているネットワークである．</p>
<p><img alt="インターネットとWANとLAN" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%8D%E3%83%83%E3%83%88%E3%81%A8WAN%E3%81%A8LAN.png" /></p>
</div>
<div class="section" id="id3">
<h3>:pushpin: WAN，LANの具体例<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>例えば，LANとしてEthernet，WANとしてデジタル専用線を用いる．</p>
<p><img alt="WAN，LANの具体例" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/WAN%EF%BC%8CLAN%E3%81%AE%E5%85%B7%E4%BD%93%E4%BE%8B.png" /></p>
</div>
<div class="section" id="pushpin-wan">
<h3>:pushpin: WANの種類と歴史<a class="headerlink" href="#pushpin-wan" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="WANの歴史" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/WAN%E3%81%AE%E7%A8%AE%E9%A1%9E%E3%81%A8%E6%AD%B4%E5%8F%B2.png" /></p>
</div>
<div class="section" id="pushpin">
<h3>:pushpin: グローバルネットワークとプライベートネットワーク<a class="headerlink" href="#pushpin" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ルータを境に，プライベートネットワークとグローバルネットワークに分けられる．ややこしいが，ルータにはグローバルIPアドレスが割り当てられている．</p>
<p><img alt="グローバルネットワークとプライベートネットワーク" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%A8%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF.PNG" /></p>
</div>
<div class="section" id="id4">
<h3>:pushpin: プライベートネットワークにおけるセグメント<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>プライベートネットワークは，外部ネットワーク，非武装地帯，内部ネットワークに分類される．</p>
<div class="section" id="id5">
<h4>・非武装地帯に設置するべきサーバの種類<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>攻撃の影響が内部ネットワークに広がる可能性を防ぐために，外部から直接リクエストを受ける，『DNSサーバ』『Proxyサーバ』『Webサーバ』『メールサーバ』は，非武装地帯に設置するべき．</p>
</div>
<div class="section" id="id6">
<h4>・内部ネットワークに設置するべきサーバの種類<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>外部から直接リクエストを受けない．『データベースサーバ』は，内部ネットワークに設置するべき．</p>
<p><img alt="内部，DMZ，外部" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E5%86%85%E9%83%A8%EF%BC%8CDMZ%EF%BC%8C%E5%A4%96%E9%83%A8.png" /></p>
</div>
</div>
<div class="section" id="id7">
<h3>:pushpin: ネットワークにおけるデータ通信方法の種類<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id8">
<h4>・回線交換方式<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>少数対少数でデータ通信を行うため，送信時に，送信者と受信者の宛先情報は必要ない．</p>
<p><img alt="回線交換方式" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E5%9B%9E%E7%B7%9A%E4%BA%A4%E6%8F%9B%E6%96%B9%E5%BC%8F.png" /></p>
</div>
<div class="section" id="id9">
<h4>・パケット交換方式<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>通信するデータをパケット化する．多数対多数でデータ通信を行うため，送信時に，送信者と受信者の宛先情報が必要になる．</p>
<p><img alt="パケット交換方式" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%91%E3%82%B1%E3%83%83%E3%83%88%E4%BA%A4%E6%8F%9B%E6%96%B9%E5%BC%8F.png" /></p>
</div>
</div>
</div>
<div class="section" id="ositcp">
<h2>02-01. OSI参照モデルとTCP階層モデル<a class="headerlink" href="#ositcp" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id10">
<h3>:pushpin: データの作成，ヘッダ情報追加，カプセル化<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>パケット交換方式におけるパケットのヘッダ情報は，パソコンの各概念層のプロトコルによって追加されていく．</p>
<p><img alt="パケットの構造" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%91%E3%82%B1%E3%83%83%E3%83%88%E3%81%AE%E6%A7%8B%E9%80%A0.jpg" /></p>
</div>
<div class="section" id="pushpin-osi">
<h3>:pushpin: OSI参照モデルにおいて各概念層で追加されるヘッダ情報の内容<a class="headerlink" href="#pushpin-osi" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="OSI参照モデル" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/OSI%E5%8F%82%E7%85%A7%E3%83%A2%E3%83%87%E3%83%AB.png" /></p>
</div>
<div class="section" id="id11">
<h3>:pushpin: プロトコルの分類と扱われる階層<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>TCP/IPモデルで用いられるプロトコルのうち，最も代表的な「TCP」と「IP」から名前をとって「TCP/IP」と名付けられた．プロトコルとしての暗号化技術である『セキュアプロトコル』は，赤色で示してある．</p>
<p><img alt="セキュアプロトコル" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%BB%E3%82%AD%E3%83%A5%E3%82%A2%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB.png" /></p>
</div>
</div>
<div class="section" id="id12">
<h2>02-02. 通信機器におけるヘッダ情報認識<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id13">
<h3>:pushpin: 各概念層の実際の通信機器の対応関係<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="OSI参照モデルと通信機器.png" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/OSI%E5%8F%82%E7%85%A7%E3%83%A2%E3%83%87%E3%83%AB%E3%81%A8%E9%80%9A%E4%BF%A1%E6%A9%9F%E5%99%A8.jpg" /></p>
<div class="section" id="id14">
<h4>・ネットワーク層<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id15">
<h4>・データリンク層<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id16">
<h4>・物理層<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Network Interface Card（（例）LANアダプタ，LANボード，LANカード），リピータ，LANケーブル</p>
</div>
</div>
<div class="section" id="id17">
<h3>:pushpin: 通信機器における各層のヘッダ情報の認識<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>送信元で作成されたパケットは，非カプセル化されながら，通信機器に認識される．</p>
<p><img alt="OSI参照モデルと通信機器でのパケット認識.png" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/OSI%E5%8F%82%E7%85%A7%E3%83%A2%E3%83%87%E3%83%AB%E3%81%A8%E9%80%9A%E4%BF%A1%E6%A9%9F%E5%99%A8%E3%81%A7%E3%81%AE%E3%83%91%E3%82%B1%E3%83%83%E3%83%88%E8%AA%8D%E8%AD%98.jpg" /></p>
</div>
</div>
<div class="section" id="id18">
<h2>02-03. アプリケーション層におけるデータ（メッセージ）の作成<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-url">
<h3>:pushpin: URLとメールアドレスの構造<a class="headerlink" href="#pushpin-url" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id19">
<h4>・各部品の名称<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="URLと電子メールの構造" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/URL%E3%81%A8%E9%9B%BB%E5%AD%90%E3%83%A1%E3%83%BC%E3%83%AB%E3%81%AE%E6%A7%8B%E9%80%A0.png" /></p>
</div>
<div class="section" id="id20">
<h4>・完全修飾ドメイン名とサーバー中継<a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>完全修飾ドメイン名をもとにして，サーバーを中継していき，最終的なサーバにたどり着く．</p>
<p><img alt="ドメイン名の構造" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%90%8D%E3%81%AE%E6%A7%8B%E9%80%A0.PNG" /></p>
</div>
<div class="section" id="url">
<h4>・URLにおけるパスパラメータとクエリパラメータの使い分け<a class="headerlink" href="#url" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>パスパラメータはデータをリクエストするために用いる．また，クエリパラメータは，GET送信の時に，データの検索処理／フィルタ処理／ソート処理をリクエストするために用いる．GET送信については，リクエストメッセージの説明を参照せよ．</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>完全修飾ドメイン名</th>
<th>送信先のポート番号（<code>80</code>の場合は省略可）</th>
<th>ルート</th>
<th>パスパラメータ</th>
<th>？</th>
<th>クエリパラメータ（GET送信時のみ）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http://www.example.co.jp</code></td>
<td><code>80</code></td>
<td><code>userInfo</code></td>
<td><code>{id}</code></td>
<td><code>?</code></td>
<td><code>text1=a&amp;text2=b</code></td>
</tr>
</tbody>
</table><p><strong>【URLの具体例】</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://www.example.co.jp:80/userInfo/777?text1=a&amp;text2=b
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h4>・各部品の様々な組み合わせ<a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="ホスト名とドメイン名の組み合わせの種類" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%9B%E3%82%B9%E3%83%88%E5%90%8D%E3%81%A8%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%90%8D%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%81%AE%E7%A8%AE%E9%A1%9E.gif" /></p>
</div>
</div>
<div class="section" id="pushpin-restful-api">
<h3>:pushpin: RESTful APIに対するリクエストメッセージの構造<a class="headerlink" href="#pushpin-restful-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>アプリケーション層で生成されるデータを，メッセージという．リクエスト時にクライアント側で生成されるメッセージをリクエストメッセージ，レスポンス時にサーバ側で生成されるメッセージをレスポンスメッセージという．</p>
<div class="section" id="get">
<h4>・GET送信の場合<a class="headerlink" href="#get" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>クエリパラメータに送信するデータを記述する方法．リクエストメッセージは，以下の要素に分類できる．以下では，Web APIのうち，特にRESTfulAPIに対して送信するためのリクエストメッセージの構造を説明する．</p>
<ol class="simple">
<li><p>リクエスト行</p></li>
<li><p>ヘッダー：リクエストの詳細情報（SSLによって暗号化される部分）．これに設定できるアクセストークンについては，セキュリティのノートを参照せよ．</p></li>
<li><p>送信方法：GET</p></li>
<li><p>リクエストの対象：ファイルへのパス</p></li>
<li><p>HTTPプロトコルのバージョン</p></li>
<li><p>User-Agent：ブラウザのバージョン情報等</p></li>
<li><p>Accept：ブラウザが想定する(利用可能な)MIMEのタイプ</p></li>
<li><p>Referer：遷移元のページ</p></li>
<li><p>Accept-Encoding：ブラウザがデコードできるエンコーディング形式</p></li>
<li><p>Accept-Language：ブラウザが想定する(利用可能な)言語</p></li>
</ol>
<p><img alt="GET送信時のHTTPリクエスト" src="https://user-images.githubusercontent.com/42175286/58061886-0ed95f80-7bb3-11e9-8998-f105a5e0ed40.png" /></p>
</div>
<div class="section" id="post">
<h4>・POST送信の場合<a class="headerlink" href="#post" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>クエリパラメータを，URLに記述せず，メッセージボディに記述してリクエストメッセージを送る方法．以下では，Web APIのうち，特にRESTfulAPIに対して送信するためのリクエストメッセージの構造を説明する．メッセージボディに情報が記述されるため，履歴では確認できない．また，SSLによって暗号化されるため，傍受できない．リクエストメッセージは，以下の要素に分類できる．</p>
<ol class="simple">
<li><p>リクエスト行</p></li>
<li><p>ヘッダー：リクエストの詳細情報（SSLによって暗号化される部分）．これに設定できるアクセストークンについては，セキュリティのノートを参照せよ．</p></li>
<li><p>空白行：ヘッダーとボディを分ける</p></li>
<li><p>ボディ：画面での入力内容が入っている（SSLによって暗号化される部分）</p></li>
<li><p>送信方法：POST</p></li>
<li><p>リクエストの対象：ファイルへのパス</p></li>
<li><p>HTTPプロトコルのバージョン</p></li>
</ol>
<p><img alt="POST送信時のHTTPリクエスト" src="https://user-images.githubusercontent.com/42175286/58061918-29abd400-7bb3-11e9-94d0-fd528901ba7c.png" /></p>
</div>
<div class="section" id="id22">
<h4>・例外として，ボディをもつGET送信の場合<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>GET送信ではあるが，ボディーにクエリパラメータを記述して送信する方法がある．</p>
<p>POSTMANで，GET送信にメッセージボディを含めることについて：
https://github.com/postmanlabs/postman-app-support/issues/131</p>
</div>
</div>
<div class="section" id="pushpin-soap-api">
<h3>:pushpin: （補足）SOAP APIに対するリクエストメッセージの構造<a class="headerlink" href="#pushpin-soap-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id23">
<h4>・POST送信の場合<a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="SOAP API" src="https://user-images.githubusercontent.com/42175286/59289616-6b5f0480-8cb1-11e9-987f-b1761c73fcf1.gif" /></p>
</div>
</div>
<div class="section" id="id24">
<h3>:pushpin: レスポンスメッセージの構造<a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ol class="simple">
<li><p>HTTPステータス</p></li>
<li><p>ヘッダー：レスポンスの詳細情報がある（SSLによって暗号化される部分）．これに設定できるアクセストークンについては，セキュリティのノートを参照せよ．</p></li>
<li><p>空白行：ヘッダーとボディを分ける</p></li>
<li><p>ボディ：HTMLや画像等が入る（SSLによって暗号化される部分）</p></li>
<li><p>HTTPプロトコルのバージョン</p></li>
<li><p>ステータスコード：200はサーバーのWebシステム処理が成功したことを表す</p></li>
<li><p>Server：サーバーの名前とバージョン等です．</p></li>
<li><p>Content-Type：出力するMIMEタイプ</p></li>
</ol>
<p><img alt="HTTPリクエストに対するHTTPレスポンス" src="https://user-images.githubusercontent.com/42175286/58062092-fd448780-7bb3-11e9-8b33-e11595c4e1fc.PNG" /></p>
</div>
<div class="section" id="pushpin-http">
<h3>:pushpin: HTTPステータスの種類<a class="headerlink" href="#pushpin-http" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id25">
<h4>・100番台：継続<a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id26">
<h4>・200番台：リクエスト成功<a class="headerlink" href="#id26" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id27">
<h4>・300番台：リダイレクトに関するステータス<a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id28">
<h4>・400番台：リクエスト失敗<a class="headerlink" href="#id28" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="id29">
<h4>・500番台：サーバーエラー<a class="headerlink" href="#id29" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="id30">
<h2>02-04. アプリケーション層におけるメールデータの作成<a class="headerlink" href="#id30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id31">
<h3>:pushpin: メール送信用プロトコル<a class="headerlink" href="#id31" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="smtp-auth-simple-mail-transfer-protocol-authentication">
<h4>・SMTP AUTH：Simple Mail Transfer Protocol AUTHentication**<a class="headerlink" href="#smtp-auth-simple-mail-transfer-protocol-authentication" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メール送信にあたってユーザ認証の仕組みがないSMTPを拡張し，ユーザ認証機能を追加した仕様．</p>
</div>
</div>
<div class="section" id="id32">
<h3>:pushpin: メール受信用プロトコル<a class="headerlink" href="#id32" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="pop3-post-official-protocol-version-3">
<h4>・POP3：Post Official Protocol version 3<a class="headerlink" href="#pop3-post-official-protocol-version-3" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メールサーバに届いたメールを，受信機器にダウンロードし，受信機器で閲覧するプロトコル．メールの既読未読状況は，他の受信機器と共有される．</p>
</div>
<div class="section" id="imap4-internet-message-access-protocol-version-3">
<h4>・IMAP4：Internet Message Access Protocol version 3<a class="headerlink" href="#imap4-internet-message-access-protocol-version-3" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メールサーバに届いたメールを，受信機器にダウンロードせず，メールサーバに置いたまま閲覧するプロトコル．メールの既読未読状況は，他の受信機器と共有されない．</p>
<p><strong>【具体例】</strong></p>
<p>GmailでPOPかIMAPを設定可能</p>
<p><img alt="GmailでPOPorIMAPを設定" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/Gmail%E3%81%A7POP%E3%81%8BIMAP%E3%82%92%E8%A8%AD%E5%AE%9A.jpg" /></p>
</div>
<div class="section" id="apop-authenticated-pop">
<h4>・APOP：Authenticated POP<a class="headerlink" href="#apop-authenticated-pop" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>メール受信の際に，チャレンジレスポンス方式の認証を行うことで平文の認証情報がネットワークに流れるのを防止するプロトコル</p>
</div>
</div>
</div>
<div class="section" id="id33">
<h2>02-05. トランスポート層におけるヘッダ情報追加<a class="headerlink" href="#id33" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-tcp">
<h3>:pushpin: TCPによるヘッダ情報の追加と識別の仕組み<a class="headerlink" href="#pushpin-tcp" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="トランスポート層からアプリケーション層へのパケットの移動" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88%E5%B1%A4%E3%81%8B%E3%82%89%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%B1%A4%E3%81%B8%E3%81%AE%E3%83%91%E3%82%B1%E3%83%83%E3%83%88%E3%81%AE%E7%A7%BB%E5%8B%95.PNG" /></p>
<div class="section" id="id34">
<h4>・リクエスト時（図の右矢印）<a class="headerlink" href="#id34" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>まず，ネットワーク層でプライベートIPアドレスを用いて，リクエスト先のパソコンを識別する．その後，トランスポート層で，ポート番号を元にして，アプリケーション層の特定のソフトウェアにパケットを送信する．</p>
<p><strong>【ポート番号の指定例】</strong></p>
<p>ローカル環境のnginxのポート番号を<code class="docutils literal notranslate"><span class="pre">8080</span></code>と設定した場合，リクエスト時に以下のようにポート番号を指定すると，nginxにリクエストを送信できる．</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="id35">
<h4>・レスポンス時（図の左矢印）<a class="headerlink" href="#id35" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>アプリケーション層から送信されてきたパケットの通過したポート番号をヘッダ情報として追加する．これを，ネットワーク層へ送信する．</p>
</div>
</div>
<div class="section" id="id36">
<h3>:pushpin: ポートスキャナ<a class="headerlink" href="#id36" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ポートスキャナを用いることによって，各ポートにアクセスし，応答があるかどうかや，どのようなソフトウェアが応答するかを調べ，一覧表示することができる．</p>
</div>
<div class="section" id="id37">
<h3>:pushpin: ポート番号の種類<a class="headerlink" href="#id37" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>アプリには，種類ごとにポート番号が割り当てられている．</p>
<div class="section" id="well-known-0-1023">
<h4>・Well known ポート番号（0 ～ 1023）<a class="headerlink" href="#well-known-0-1023" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>IANA：Internet Assigned Numbers Authority（インターネット割当番号公社）によって管理されているポート番号．Webサーバがリクエストを受信する時，またレスポンスを送信する時に使用される．ホストPCとゲストPC（仮想サーバ）との通信では，80番（HTTP）の受信に関する様々な設定が必要になる．</p>
<p><img alt="ポート番号とプロトコルの対応関係" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%9D%E3%83%BC%E3%83%88%E7%95%AA%E5%8F%B7%E3%81%A8%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%AE%E5%AF%BE%E5%BF%9C%E9%96%A2%E4%BF%82.png" /></p>
</div>
<div class="section" id="id38">
<h4>・登録済みポート番号（1024 ～ 49151）<a class="headerlink" href="#id38" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>IANAが登録申請を受けて公開しているポート番号．企業が作成した独自のアプリなどに対して割り当てられる．クライアントがリクエストを送信する時，またレスポンスを受信する時に使用される．</p>
</div>
<div class="section" id="id39">
<h4>・動的／非公式ポート番号（49152 ～ 65535）<a class="headerlink" href="#id39" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>自由に使用できるポート番号．クライアントがリクエストを送信する時，またレスポンスを受信する時に使用される．</p>
</div>
</div>
</div>
<div class="section" id="id40">
<h2>02-06. インターネット層におけるヘッダ情報追加<a class="headerlink" href="#id40" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-ip">
<h3>:pushpin: IPパケットのヘッダ情報を用いた宛先認識<a class="headerlink" href="#pushpin-ip" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ol class="simple">
<li><p>PC-Aは，構成したIPパケットをEthernetに乗せて，ルータAに送信．</p></li>
<li><p>ルータAは，IPパケットをデジタル専用線に乗せて，ルータBに送信．</p></li>
<li><p>ルータBは，構成したIPパケットをEthernetに乗せて，Webサーバに送信．</p></li>
</ol>
<p><img alt="ネットワークにおけるTCP_IPを用いたデータ通信" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8BTCP_IP%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E9%80%9A%E4%BF%A1.png" /></p>
</div>
<div class="section" id="pushpin-ipv4">
<h3>:pushpin: IPv4アドレスの種類<a class="headerlink" href="#pushpin-ipv4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="プライベートIPアドレスとグローバルIPアドレス" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88IP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%81%A8%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%ABIP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9.png" /></p>
<div class="section" id="ip">
<h4>・プライベートIPアドレス<a class="headerlink" href="#ip" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>LAN内で使用される．異なるプライベートネットワーク間では，同じIPv4アドレスが存在する．プライベートIPアドレスは，『<code class="docutils literal notranslate"><span class="pre">10.0.0.0</span></code> ～ <code class="docutils literal notranslate"><span class="pre">10.255.255.255</span></code>』，『<code class="docutils literal notranslate"><span class="pre">172.16.0.0</span></code> ～ <code class="docutils literal notranslate"><span class="pre">172.31.255.255</span></code>』，『<code class="docutils literal notranslate"><span class="pre">192.168.0.0</span></code> ～ <code class="docutils literal notranslate"><span class="pre">192.168.255.255</span></code>』で表される．</p>
</div>
<div class="section" id="id41">
<h4>・グローバルIPアドレス<a class="headerlink" href="#id41" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>プロバイダが提供するIPv4アドレスである．パブリックネットワーク内に同じIPv4アドレスは存在せず，Network Information Centerへの使用申請が必要．プライベートIPアドレスの番号でなければ，グローバルIPアドレスである．NATはグローバルIPアドレスを持っており，プライベートネットワークとプライベートネットワーク間の双方向への通信時に，プライベートIPアドレスと相互変換する．</p>
</div>
</div>
<div class="section" id="pushpin-ipbit">
<h3>:pushpin: プライベート／グローバルIPアドレスとbitとの関係<a class="headerlink" href="#pushpin-ipbit" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>例えば，プライベートIPアドレスの４つのオクテット（第一オクテットから第四オクテットまで）が１Byteの容量をもち，IPアドレス全体で４Byteの容量をもつ．ちなみに，<code class="docutils literal notranslate"><span class="pre">172</span></code>から始まるIPアドレスは，クラスBである．</p>
<p><img alt="IPアドレスとbitの関係" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/IP%E3%82%A2%E3%83%88%E3%82%99%E3%83%AC%E3%82%B9%E3%81%A8bit%E3%81%AE%E9%96%A2%E4%BF%82.png" /></p>
</div>
<div class="section" id="id42">
<h3>:pushpin: プライベート／グローバルIPアドレスのネットワーク部とホスト部<a class="headerlink" href="#id42" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="IPアドレスのホスト部とネットワーク部" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/IP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%81%AE%E3%83%9B%E3%82%B9%E3%83%88%E9%83%A8%E3%81%A8%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E9%83%A8.png" /></p>
<div class="section" id="id43">
<h4>・クラスによるホスト部とネットワーク部の定義<a class="headerlink" href="#id43" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>IPアドレスをクラスとして分類し，各クラスでIPアドレスのネットワーク部とホスト部を定義する方法．設定したIPアドレスの属するクラスによって，使用できるIPアドレスの範囲が決まってしまう．ホスト部とネットワーク部の定義方法が4種類しかないため，IPアドレスのパターン数（最大パソコン数）が多すぎたり，少なすぎたりしてしまう．</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">使用可能なIPアドレスの範囲</th>
<th align="center">クラス</th>
<th align="center">ネットワーク部のオクテット</th>
<th>ホスト部のオクテット</th>
<th align="center">二進数で見た時（n：ネ，h：ホ）</th>
<th align="center">IPアドレスのパターン数（最大パソコン数）</th>
<th align="center">備考</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>0.0.0.0</code> 〜 <code>127.255.255.255</code></td>
<td align="center">A</td>
<td align="center">第一のみ</td>
<td>第二から第四</td>
<td align="center"><code>0nnnnnnn.hhhhhhhh.hhhhhhhh.hhhhhhhh</code></td>
<td align="center">2^24（16777216）個</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>128.0.0.0</code> 〜 <code>191.255.255.255</code></td>
<td align="center">B</td>
<td align="center">第一から第二</td>
<td>第三から第四</td>
<td align="center"><code>10nnnnnn.nnnnnnnn.hhhhhhhh.hhhhhhhh</code></td>
<td align="center">2^16（65536）個</td>
<td align="center">よく使う</td>
</tr>
<tr>
<td align="center"><code>192.0.0.0</code> 〜 <code>223.255.255.255</code></td>
<td align="center">C</td>
<td align="center">第一から第三</td>
<td>第四のみ</td>
<td align="center"><code>110nnnnn.nnnnnnnn.nnnnnnnn.hhhhhhhh</code></td>
<td align="center">2^8（256）個</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>224.0.0.0</code> 〜 <code>239.255.255.255</code></td>
<td align="center">D</td>
<td align="center">-</td>
<td>-</td>
<td align="center"><code>1110xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx</code></td>
<td align="center">-</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>240.0.0.0</code> 〜 <code>255.255.255.255</code></td>
<td align="center">E</td>
<td align="center">-</td>
<td>-</td>
<td align="center"><code>1111xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx</code></td>
<td align="center">-</td>
<td align="center"></td>
</tr>
</tbody>
</table></div>
<div class="section" id="id44">
<h4>・サブネットマスクよるネットワーク部とホスト部の定義<a class="headerlink" href="#id44" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>『<code class="docutils literal notranslate"><span class="pre">1</span></code>』あるいは『<code class="docutils literal notranslate"><span class="pre">0</span></code>』で，IPアドレスのネットワーク部とホスト部を定義し，IPアドレスの後ろに記述する方法（<strong>【具体例】</strong><code class="docutils literal notranslate"><span class="pre">192.168.42.23/24</span></code>）．設定したIPアドレスに対して，使用可能なIPアドレスの範囲を自由に定義することができる．ネットワーク部を『<code class="docutils literal notranslate"><span class="pre">1</span></code>』，ホスト部を『<code class="docutils literal notranslate"><span class="pre">0</span></code>』で表現する．サブネットマスクの表記方法には，二進数形式，IPアドレス形式，<code class="docutils literal notranslate"><span class="pre">1</span></code>の個数で表すCIDR形式による表現方法がある．</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">二進数形式</th>
<th align="center">IPアドレス形式</th>
<th align="center">CIDR形式</th>
<th align="center">IPアドレスのパターン数（最大パソコン数）</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>10000000.00000000.00000000.00000000</code></td>
<td align="center"><code>128.0.0.0</code></td>
<td align="center"><code>/1</code></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11000000.00000000.00000000.00000000</code></td>
<td align="center"><code>192.0.0.0</code></td>
<td align="center"><code>/2</code></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center">...</td>
<td align="center">...</td>
<td align="center">...</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.00000000.00000000.00000000</code></td>
<td align="center"><code>255.0.0.0</code></td>
<td align="center"><code>/8</code></td>
<td align="center">2^24（16777216）個</td>
<td></td>
</tr>
<tr>
<td align="center">...</td>
<td align="center">...</td>
<td align="center">...</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111110.00000000.00000000</code></td>
<td align="center"><code>255.254.0.0</code></td>
<td align="center"><code>/15</code></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111111.00000000.00000000</code></td>
<td align="center"><code>255.255.0.0</code></td>
<td align="center"><code>/16</code></td>
<td align="center">2^16（65536）個</td>
<td>よく使う</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">...</td>
<td align="center">...</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111111.11111110.00000000</code></td>
<td align="center"><code>255.255.254.0</code></td>
<td align="center"><code>/23</code></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111111.11111111.00000000</code></td>
<td align="center"><code>255.255.255.0</code></td>
<td align="center"><code>/24</code></td>
<td align="center">2^8（256）個</td>
<td></td>
</tr>
<tr>
<td align="center">...</td>
<td align="center">...</td>
<td align="center">...</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111111.11111111.11111110</code></td>
<td align="center"><code>255.255.255.254</code></td>
<td align="center"><code>/31</code></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"><code>11111111.11111111.11111111.11111111</code></td>
<td align="center"><code>255.255.255.255</code></td>
<td align="center"><code>/32</code></td>
<td align="center"></td>
<td></td>
</tr>
</tbody>
</table><p><strong>【使用例】</strong></p>
<p>プライベートIPアドレスが<code class="docutils literal notranslate"><span class="pre">192.168.0.0</span></code>（<code class="docutils literal notranslate"><span class="pre">11000000.10101000.00000000.00000000</span></code>）で，使いたいIPアドレスのパターン数が65536個，または16777216個の場合に，サブネットマスクの表記，使用可能なIPアドレスの範囲は以下のようになる．</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>使いたいIPアドレスのパターン数</th>
<th align="center">二進数形式による表記</th>
<th align="center">IPアドレス形式</th>
<th align="center">CIDR形式</th>
<th></th>
<th align="center">使用可能なIPアドレスの範囲</th>
</tr>
</thead>
<tbody>
<tr>
<td>65536個</td>
<td align="center"><code>192.168.0.0/11111111.11111111.00000000.00000000</code></td>
<td align="center"><code>192.168.0.0/255.255.0.0</code></td>
<td align="center"><code>192.168.0.0/16</code></td>
<td>⇒</td>
<td align="center"><code>192.168.0.1</code> 〜  <code>192.168.255.254</code></td>
</tr>
<tr>
<td>16777216個</td>
<td align="center"><code>192.168.0.0/11111111.11111111.11111111.11111111</code></td>
<td align="center"><code>192.168.0.0/255.255.255.0</code></td>
<td align="center"><code>192.168.0.0/24</code></td>
<td>⇒</td>
<td align="center"><code>192.168.0.1</code> 〜 <code>192.168.0.254</code></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="pushpin-dnshosts">
<h3>:pushpin: DNSサーバとhostsファイルの役割<a class="headerlink" href="#pushpin-dnshosts" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id45">
<h4>・完全修飾ドメイン名とグローバルIPアドレスのマッピング<a class="headerlink" href="#id45" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="IPアドレスと完全修飾ドメイン名のマッピング1（編集後）" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/IP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%81%A8%E5%AE%8C%E5%85%A8%E4%BF%AE%E9%A3%BE%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%90%8D%E3%81%AE%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B04.png" /></p>
<p>例えば，外部WebサーバのグローバルIPアドレスが『203.142.205.139』であると知っている場合，URLのプロトコル部分以下を『<code class="docutils literal notranslate"><span class="pre">203.142.205.139</span></code>』としてリクエストすれば，外部Webサーバが提供するウェブサイトにアクセスできる．しかし，グローバルIPアドレスは数字の羅列であるため，人間には覚えにくい．そこで，グローバルIPアドレスの代わりに，完全修飾ドメイン名をURLの一部として用いる．</p>
</div>
<div class="section" id="hosts">
<h4>・hostsファイル<a class="headerlink" href="#hosts" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>DNSサーバよりも先に参照されるマッピングファイル．WebサーバのIPアドレスがDNSサーバに登録されていない時，またDNSサーバが不具合の時に，DNSサーバの代わりとして用いる．</p>
</div>
</div>
</div>
<div class="section" id="id46">
<h2>02-07. ルータの種類<a class="headerlink" href="#id46" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-nat-nat-network-address-translationipv4">
<h3>:pushpin: NAT（静的NAT）：Network Address TranslationによるIPアドレスv4の変換<a class="headerlink" href="#pushpin-nat-nat-network-address-translationipv4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>一つのグローバルIPアドレスに対して，一つのプライベートIPアドレスを紐づけられる．グローバルIPアドレスを持ち，グローバルネットワークとプライベートネットワークの双方向への通信時に，IPアドレスを変換できる．</p>
<div class="section" id="id47">
<h4>・リクエスト時のルータにおける変換<a class="headerlink" href="#id47" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>プライベートネットワークから出る時に，パケットのヘッダ情報における『送信元』のプライベートIPアドレスをグローバルIPアドレスに変換する．</p>
<p>例えば，GoogleでWebページを見ながら，Gmailアプリを起動している場合，リクエストにおけるパケット情報として…</p>
<p><strong>【変換例】</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">送信元プライベートIPアドレス</th>
<th align="center">⇄</th>
<th align="center">送信元グローバルIPアドレス</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>192.168.1.1</code></td>
<td align="center"></td>
<td align="center"><code>200.1.1.1</code></td>
</tr>
</tbody>
</table><ol>
<li><p>『送信元プライベートIPアドレス』『送信先グローバルIPアドレス』『メールサーバの待ち受けポート番号<code class="docutils literal notranslate"><span class="pre">110</span></code>（POP3）』を指定して，メールサーバにリクエスト</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 送信元プライベートIPアドレスは明示されない</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">jp</span><span class="p">:</span><span class="mi">110</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>『送信元プライベートIPアドレス』『送信先グローバルIPアドレス』『Webサーバの待ち受けポート番号<code class="docutils literal notranslate"><span class="pre">80</span></code>（HTTP）』を指定して，Webサーバにリクエスト．ただし．<code class="docutils literal notranslate"><span class="pre">80</span></code>は，省略可能．</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 送信元プライベートIPアドレスは明示されない</span>
<span class="c1"># 80は省略可能</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">jp</span><span class="p">:</span><span class="mi">80</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>『送信元プライベートIPアドレス』『送信先グローバルIPアドレス』『DNSサーバの待ち受けポート番号<code class="docutils literal notranslate"><span class="pre">53</span></code>（DNS）』を指定して，DNSサーバにリクエスト</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 送信元プライベートIPアドレスは明示されない</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">jp</span><span class="p">:</span><span class="mi">53</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>これらの『送信元プライベートIPアドレス』が，NATルータで，グローバルIPアドレスに変換される．</p></li>
</ol>
<p><img alt="プライベートからグローバルへのnat変換" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%81%8B%E3%82%89%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%81%B8%E3%81%AEnat%E5%A4%89%E6%8F%9B.png" /></p>
</div>
<div class="section" id="id48">
<h4>・レスポンス時の変換<a class="headerlink" href="#id48" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>プライベートネットワークに入る時に，パケットのヘッダ情報における『宛先』のグローバルIPアドレスをプライベートIPアドレスに変換する．</p>
<p><img alt="グローバルからプライベートへのnat変換" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%81%8B%E3%82%89%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%81%B8%E3%81%AEnat%E5%A4%89%E6%8F%9B.png" /></p>
</div>
</div>
<div class="section" id="pushpin-napt-nat-network-address-port-translationip">
<h3>:pushpin: NAPT（動的NAT）：Network Address Port TranslationによるIPアドレスとポート番号の変換<a class="headerlink" href="#pushpin-napt-nat-network-address-port-translationip" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>一つのグローバルIPアドレスに対して，複数のプライベートIPアドレスを紐づけられる．グローバルネットワークとプライベートネットワークの双方向への通信時に，IPアドレスを変換できる．</p>
<div class="section" id="id49">
<h4>・リクエスト時の変換<a class="headerlink" href="#id49" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>プライベートネットワークから出る時に，パケットのヘッダ情報における『送信元』のプライベートIPアドレスをグローバルIPアドレスに変換する．ただし，異なるプライベートIPアドレスが同じグローバルIPに変換されてしまうため，これを識別するために，ポート番号を複数の異なるポート番号に変換し，グローバルIPアドレスに付け加える．</p>
<p><strong>【変換例】</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">送信元プライベートIPアドレス</th>
<th align="center">変換前ポート番号</th>
<th align="center">⇄</th>
<th align="center">送信元グローバルIPアドレス</th>
<th align="center">変換後ポート番号</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>192.168.2.1</code></td>
<td align="center"><code>50011</code></td>
<td align="center"></td>
<td align="center"><code>130.X.X.X:50011</code></td>
<td align="center"><code>50011</code></td>
</tr>
<tr>
<td align="center"><code>192.168.3.1</code></td>
<td align="center"><code>50011</code></td>
<td align="center"></td>
<td align="center"><code>130.X.X.X:50012</code></td>
<td align="center"><code>50012</code></td>
</tr>
</tbody>
</table><p><img alt="napt変換" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/napt%E5%A4%89%E6%8F%9B.png" /></p>
</div>
<div class="section" id="id50">
<h4>・レスポンス時の変換<a class="headerlink" href="#id50" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>プライベートネットワークに入る時に，付け加えられたポート番号を元に，パケットのヘッダ情報における『宛先』のグローバルIPアドレスを，異なるプライベートIPアドレスに変換し分ける．</p>
<p><img alt="napt変換_2" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/napt%E5%A4%89%E6%8F%9B_2.png" /></p>
</div>
</div>
</div>
<div class="section" id="web3">
<h2>03-01. Webシステムを構成する主要な3層構造<a class="headerlink" href="#web3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Webサーバ，APサーバ，DBサーバによるネットワークの仕組みをWebシステムという．ソフトウェアとハードウェアのノートも参照せよ．</p>
<p><img alt="Webサーバ，APサーバ，DBサーバ" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/Web%E3%82%B5%E3%83%BC%E3%83%90%EF%BC%8CAP%E3%82%B5%E3%83%BC%E3%83%90%EF%BC%8CDB%E3%82%B5%E3%83%BC%E3%83%90.png" /></p>
<div class="section" id="pushpin-webweb">
<h3>:pushpin: WebサーバソフトウェアをもつWebサーバ<a class="headerlink" href="#pushpin-webweb" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Webサーバソフトウェア（Apache，Nginxなど）がインストールされている．また，Web兼APサーバソフトウェア（NGINX Unit）がインストールされていることもある．役割として，Webブラウザから静的コンテンツのリクエストがあった場合に，アプリケーションサーバにリクエストを行う．アプリケーションサーバからレスポンスを受け取り，Webブラウザにレスポンスを行う．</p>
<div class="section" id="server">
<h4>・サーバ変数（<code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code>）<a class="headerlink" href="#server" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-PHP notranslate"><div class="highlight"><pre><span></span><span class="x">$_SERVER[&#39;SERVER_ADDR&#39;]           サーバのIPアドレス(例:192.168.0.1)</span>
<span class="x">$_SERVER[&#39;SERVER_NAME&#39;]           サーバの名前(例:www.example.com)</span>
<span class="x">$_SERVER[&#39;SERVER_PORT&#39;]           サーバのポート番号(例:80)</span>
<span class="x">$_SERVER[&#39;SERVER_PROTOCOL&#39;]       サーバプロトコル(例:HTTP/1.1)</span>
<span class="x">$_SERVER[&#39;SERVER_ADMIN&#39;]          サーバの管理者(例:root@localhost)</span>
<span class="x">$_SERVER[&#39;SERVER_SIGNATURE&#39;]      サーバのシグニチャ(例:Apache/2.2.15...)</span>
<span class="x">$_SERVER[&#39;SERVER_SOFTWARE&#39;]       サーバソフトウェア(例:Apache/2.2.15...)</span>
<span class="x">$_SERVER[&#39;GATEWAY_INTERFACE&#39;]     CGIバージョン(例:CGI/1.1)</span>
<span class="x">$_SERVER[&#39;DOCUMENT_ROOT&#39;]         ドキュメントルート(例:/var/www/html)</span>
<span class="x">$_SERVER[&#39;PATH&#39;]                  環境変数PATHの値(例:/sbin:/usr/sbin:/bin:/usr/bin)</span>
<span class="x">$_SERVER[&#39;PATH_TRANSLATED&#39;]       スクリプトファイル名(例:/var/www/html/test.php)</span>
<span class="x">$_SERVER[&#39;SCRIPT_FILENAME&#39;]       スクリプトファイル名(例:/var/www/html/test.php)</span>
<span class="x">$_SERVER[&#39;REQUEST_URI&#39;]           リクエストのURI(例:/test.php)</span>
<span class="x">$_SERVER[&#39;PHP_SELF&#39;]              PHPスクリプト名(例:/test.php)</span>
<span class="x">$_SERVER[&#39;SCRIPT_NAME&#39;]           スクリプト名(例:/test.php)</span>
<span class="x">$_SERVER[&#39;PATH_INFO&#39;]             URLの引数に指定されたパス名(例:/test.php/aaa)</span>
<span class="x">$_SERVER[&#39;ORIG_PATH_INFO&#39;]        PHPで処理される前のPATH_INFO情報</span>
<span class="x">$_SERVER[&#39;QUERY_STRING&#39;]          URLの?以降に記述された引数(例:q=123)</span>
<span class="x">$_SERVER[&#39;REMOTE_ADDR&#39;]           クライアントのIPアドレス(例:192.168.0.123)</span>
<span class="x">$_SERVER[&#39;REMOTE_HOST&#39;]           クライアント名(例:client32.example.com)</span>
<span class="x">$_SERVER[&#39;REMOTE_PORT&#39;]           クライアントのポート番号(例:64799)</span>
<span class="x">$_SERVER[&#39;REMOTE_USER&#39;]           クライアントのユーザ名(例:tanaka)</span>
<span class="x">$_SERVER[&#39;REQUEST_METHOD&#39;]        リクエストメソッド(例:GET)</span>
<span class="x">$_SERVER[&#39;REQUEST_TIME&#39;]          リクエストのタイムスタンプ(例:1351987425)</span>
<span class="x">$_SERVER[&#39;REQUEST_TIME_FLOAT&#39;]    リクエストのタイムスタンプ(マイクロ秒)(PHP 5.1.0以降)</span>
<span class="x">$_SERVER[&#39;REDIRECT_REMOTE_USER&#39;]  リダイレクトされた場合の認証ユーザ(例:tanaka)</span>
<span class="x">$_SERVER[&#39;HTTP_ACCEPT&#39;]           リクエストのAccept:ヘッダの値(例:text/html)</span>
<span class="x">$_SERVER[&#39;HTTP_ACCEPT_CHARSET&#39;]   リクエストのAccept-Charset:ヘッダの値(例:utf-8)</span>
<span class="x">$_SERVER[&#39;HTTP_ACCEPT_ENCODING&#39;]  リクエストのAccept-Encoding:ヘッダの値(例:gzip)</span>
<span class="x">$_SERVER[&#39;HTTP_ACCEPT_LANGUAGE&#39;]  リクエストのAccept-Language:ヘッダの値(ja,en-US)</span>
<span class="x">$_SERVER[&#39;HTTP_CACHE_CONTROL&#39;]    リクエストのCache-Control:ヘッダの値(例:max-age=0)</span>
<span class="x">$_SERVER[&#39;HTTP_CONNECTION&#39;]       リクエストのConnection:ヘッダの値(例:keep-alive)</span>
<span class="x">$_SERVER[&#39;HTTP_HOST&#39;]             リクエストのHost:ヘッダの値(例:www.example.com)</span>
<span class="x">$_SERVER[&#39;HTTP_REFERER&#39;]          リンクの参照元URL(例:http://www.example.com/)</span>
<span class="x">$_SERVER[&#39;HTTP_USER_AGENT&#39;]       リクエストのUser-Agent:ヘッダの値(例:Mozilla/5.0...)</span>
<span class="x">$_SERVER[&#39;HTTPS&#39;]                 HTTPSを利用しているか否か(例:on)</span>
<span class="x">$_SERVER[&#39;PHP_AUTH_DIGEST&#39;]       ダイジェスト認証時のAuthorization:ヘッダの値</span>
<span class="x">$_SERVER[&#39;PHP_AUTH_USER&#39;]         HTTP認証時のユーザ名</span>
<span class="x">$_SERVER[&#39;PHP_AUTH_PW&#39;]           HTTP認証時のパスワード</span>
<span class="x">$_SERVER[&#39;AUTH_TYPE&#39;]             HTTP認証時の認証形式</span>
</pre></div>
</div>
</div>
<div class="section" id="request">
<h4>・リクエスト変数（<code class="docutils literal notranslate"><span class="pre">$_REQUEST</span></code>）<a class="headerlink" href="#request" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>GET変数（<code class="docutils literal notranslate"><span class="pre">$_GET</span></code>），POST変数（<code class="docutils literal notranslate"><span class="pre">$_POST</span></code>），COOKIE（<code class="docutils literal notranslate"><span class="pre">$_COOKIE</span></code>）をまとめた連想配列．</p>
</div>
<div class="section" id="session">
<h4>・セッション変数（<code class="docutils literal notranslate"><span class="pre">$_SESSION</span></code>）<a class="headerlink" href="#session" title="このヘッドラインへのパーマリンク">¶</a></h4>
</div>
<div class="section" id="symfony">
<h4>・Symfonyフレームワークによる各変数の取得<a class="headerlink" href="#symfony" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-PHP notranslate"><div class="highlight"><pre><span></span><span class="x">// $_GET[&#39;hoge&#39;]</span>
<span class="x">$request-&gt;query-&gt;get(&#39;hoge&#39;);</span>
<span class="x"> </span>
<span class="x">// $_POST[&#39;hoge&#39;]</span>
<span class="x">$request-&gt;request-&gt;get(&#39;hoge&#39;);</span>
<span class="x"> </span>
<span class="x">// ルーティングパラメータ / ex) @Route(&#39;/{hoge}&#39;)</span>
<span class="x">$request-&gt;attributes-&gt;get(&#39;hoge&#39;);</span>
<span class="x"> </span>
<span class="x">// $_COOKIE[&#39;hoge&#39;]</span>
<span class="x">$request-&gt;cookies-&gt;get(&#39;hoge&#39;);</span>
<span class="x"> </span>
<span class="x">// $_FILES[&#39;hoge&#39;]</span>
<span class="x">$request-&gt;files-&gt;get(&#39;hoge&#39;);</span>
<span class="x"> </span>
<span class="x">// $_SERVER[&#39;SCRIPT_FILENAME&#39;]</span>
<span class="x">$request-&gt;server-&gt;get(&#39;SCRIPT_FILENAME&#39;);</span>
<span class="x"> </span>
<span class="x">// $_SERVER[&#39;HTTP_USER_AGENT&#39;]</span>
<span class="x">$request-&gt;headers-&gt;get(&#39;User-Agent&#39;);</span>
<span class="x"> </span>
<span class="x">// query &gt; attribute  &gt; request の順で検索</span>
<span class="x">$request-&gt;get(&#39;hoge&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pushpin-apap">
<h3>:pushpin: APサーバソフトウェアをもつAPサーバ<a class="headerlink" href="#pushpin-apap" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>PHPにおいては，APサーバソフトウェア（PHPならPHP-FPM，JavaならTomcat）がインストールされている．役割として，Webサーバから動的コンテンツのリクエストがあった場合に，プログラミング言語を言語プロセッサで翻訳し，DBサーバにリクエストを行う．DBサーバからのレスポンスを受け取り，Webサーバに動的なコンテンツのレスポンスを行う．</p>
</div>
<div class="section" id="pushpin-db">
<h3>:pushpin: データベース管理システムをもつDBサーバ<a class="headerlink" href="#pushpin-db" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>データベース管理システムがインストールされている．データベースの情報が保存されている．</p>
</div>
<div class="section" id="id51">
<h3>:pushpin: サーバの処理能力向上<a class="headerlink" href="#id51" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id52">
<h4>・スケールアップ ⇔ スケールダウン<a class="headerlink" href="#id52" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>サーバ自体のスペックをより高くすることで，サーバ当たりの処理能力を向上させる．その逆は，スケールダウン．設定で，仮想サーバのスペックを上げることも，これに該当する．</p>
<p><img alt="スケールアップ" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97.png" /></p>
</div>
<div class="section" id="id53">
<h4>・スケールアウト ⇔ スケールイン<a class="headerlink" href="#id53" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>サーバの台数を増やすことで，サーバ全体の処理能力を向上させる．その逆は，スケールイン．</p>
<p><img alt="スケールアウト" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E3%82%A2%E3%82%A6%E3%83%88.png" /></p>
</div>
</div>
</div>
<div class="section" id="web">
<h2>03-02. Webシステムの構成方法<a class="headerlink" href="#web" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-dual">
<h3>:pushpin: Dualシステム<a class="headerlink" href="#pushpin-dual" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>同じ処理を行う2つのシステムからなるシステム構成のこと．随時，処理結果を照合する．いずれかが故障した場合，異常が発生したシステムを切り離し，残る片方で処理を続けることによって，故障を乗り切る．</p>
<p><img alt="デュアルシステム" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%87%E3%83%A5%E3%82%A2%E3%83%AB%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0.png" /></p>
</div>
<div class="section" id="pushpin-duplex">
<h3>:pushpin: Duplexシステム<a class="headerlink" href="#pushpin-duplex" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>オンライン処理を行う主系システムと，バッチ処理を行う従系システムからなるシステム構成のこと．主系システムが故障した場合，主系システムのオンライン処理を従系システムに引き継ぎ，処理を続けることによって，故障を乗り切る．</p>
<p><img alt="デュプレックスシステム" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%87%E3%83%A5%E3%83%97%E3%83%AC%E3%83%83%E3%82%AF%E3%82%B9%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0.png" /></p>
<p>従系システムの待機方法には２つの種類がある．</p>
<div class="section" id="id54">
<h4>・ホットスタンバイ<a class="headerlink" href="#id54" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="p613-1" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p613-1.png" /></p>
</div>
<div class="section" id="id55">
<h4>・コールドスタンバイ<a class="headerlink" href="#id55" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="p613-2" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p613-2.png" /></p>
</div>
</div>
<div class="section" id="id56">
<h3>:pushpin: システムの稼働率<a class="headerlink" href="#id56" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>並列システムの場合，両方の非稼働率をかけて，全体から引く．</p>
<p><strong>【具体例】</strong></p>
<p>１－(1－0.81) × (1－0.64) = 0.9316</p>
<p><img alt="稼働率の計算" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E7%A8%BC%E5%83%8D%E7%8E%87%E3%81%AE%E8%A8%88%E7%AE%97.jpg" /></p>
</div>
</div>
<div class="section" id="web-api">
<h2>03-03. Web API<a class="headerlink" href="#web-api" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id57">
<h3>:pushpin: RESTful API<a class="headerlink" href="#id57" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>分散型システムにおける複数のソフトウェアを連携させるのに適したアーキテクチャスタイルをRESTという．また，これに基づいた設計をRESTfulという．RESTful APIについては，RESTfulAPIの概念と実装（PHP）のノートを参照せよ．また，アーキテクチャスタイルについては，オブジェクト指向分析・設計のノートを参照せよ．</p>
<p><img alt="RESTfulAPIを用いたリクエスト" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/RESTfulAPI%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88.png" /></p>
</div>
<div class="section" id="id58">
<h3>:pushpin: SOAP API<a class="headerlink" href="#id58" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>1999年にMicrosoft社などによって発表された．2000年前半には企業システムのWebサービス化とともに普及するかに思われたが，複雑な構造であったため次第に敬遠されるようになった．その後，簡単な構造のRESTが好まれるようになった．</p>
</div>
</div>
<div class="section" id="id59">
<h2>03-04. サーバ間のリクエストとレスポンス<a class="headerlink" href="#id59" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id60">
<h3>:pushpin: サーバ間のデータ通信に要する時間<a class="headerlink" href="#id60" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ネットワークのデータグローバル光回線が用いられている．光は，30万km／秒であり，円周4万kmの地球を7.5周／秒できることからもわかるように，遠く離れた国にあるWebサーバであっても，データ通信に要する時間は，１秒にも満たない．</p>
</div>
<div class="section" id="pushpin-proxy">
<h3>:pushpin: フォワード／リバースProxyサーバの役割<a class="headerlink" href="#pushpin-proxy" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id61">
<h4>・代理リクエスト機能（セキュリティのノートも参照）<a class="headerlink" href="#id61" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>代理でリクエストを送るフォワードProxyサーバと，レスポンスを送るリバースProxyサーバに分類できる．</p>
<p><img alt="フォワードプロキシサーバーとリバースプロキシサーバ" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%95%E3%82%A9%E3%83%AF%E3%83%BC%E3%83%89%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A8%E3%83%AA%E3%83%90%E3%83%BC%E3%82%B9%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%82%B5%E3%83%BC%E3%83%90.png" /></p>
</div>
<div class="section" id="id62">
<h4>・キャッシュ機能<a class="headerlink" href="#id62" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>リバースProxyサーバに，Webページのコンテンツをキャッシュとして保存することによって，Webサーバのアクセス負荷を抑える．ちなみに，ブラウザもキャッシュ機能を持っている．</p>
<p><img alt="プロキシサーバのキャッシュ機能" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AE%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E6%A9%9F%E8%83%BD.png" /></p>
</div>
</div>
<div class="section" id="id63">
<h3>:pushpin: フォワード／リバースProxyサーバの設置場所<a class="headerlink" href="#id63" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>フォワードProxyサーバはプロバイダの会社に，リバースProxyサーバはリクエスト先の社内ネットワークに設置されている．</p>
<p><img alt="プロキシサーバの設置場所" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AE%E8%A8%AD%E7%BD%AE%E5%A0%B4%E6%89%80.png" /></p>
</div>
<div class="section" id="pushpin-proxy-dns-web">
<h3>:pushpin: フォワード／リバースProxyサーバ，DNSサーバ，Webサーバによる名前解決<a class="headerlink" href="#pushpin-proxy-dns-web" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><img alt="IPアドレスと完全修飾ドメイン名のマッピング3.png" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/IP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%81%A8%E5%AE%8C%E5%85%A8%E4%BF%AE%E9%A3%BE%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%90%8D%E3%81%AE%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B03.png" /></p>
<div class="section" id="id64">
<h4>・（1）完全修飾ドメイン名に対応するIPアドレスのレスポンス<a class="headerlink" href="#id64" title="このヘッドラインへのパーマリンク">¶</a></h4>
<ol class="simple">
<li><p>クライアントPCは，完全修飾ドメイン名を，フォワードProxyサーバにリクエスト．</p></li>
<li><p>フォワードProxyサーバは，完全修飾ドメイン名を，リバースProxyサーバに代理リクエスト．</p></li>
<li><p>リバースProxyサーバは，完全修飾ドメイン名を，DNSサーバに代理リクエスト．</p></li>
<li><p>DNSサーバは，完全修飾ドメインにマッピングされるIPv4アドレスを取得し，リバースProxyサーバにレスポンス．</p></li>
<li><p>リバースProxyサーバは，IPv4アドレスを，フォワードProxyサーバに代理レスポンス．（※NATによるIPv4アドレスのネットワーク間変換が起こる）</p></li>
<li><p>フォワードProxyサーバは，IPv4アドレスを，クライアントPCに代理レスポンス．</p></li>
</ol>
</div>
<div class="section" id="ipweb">
<h4>・（2）IPアドレスに対応するWebページのレスポンス<a class="headerlink" href="#ipweb" title="このヘッドラインへのパーマリンク">¶</a></h4>
<ol class="simple">
<li><p>クライアントPCは，レスポンスされたIPv4アドレスを基に，Webページを，リバースProxyサーバにリクエスト．</p></li>
<li><p>リバースProxyサーバは，Webページを，Webサーバに代理リクエスト．</p></li>
<li><p>Webサーバは，Webページを，リバースProxyサーバにレスポンス．</p></li>
<li><p>リバースProxyサーバは，Webページを，クライアントPCに代理レスポンス．</p></li>
</ol>
<p>※上記の様に，リクエストとレスポンスが繰り返されるが，データ通信は光速なので，１秒もかからない．</p>
</div>
</div>
</div>
<div class="section" id="cookie-id">
<h2>03-05. キャッシュ，Cookie，セッションID<a class="headerlink" href="#cookie-id" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id65">
<h3>:pushpin: キャッシュ<a class="headerlink" href="#id65" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Webページのコンテンツ（HTML，CSS，画像など）は，以下の場所にキャッシュとして保存される．</p>
<div class="section" id="proxy">
<h4>・リバースProxyサーバによるキャッシュ機能<a class="headerlink" href="#proxy" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>リバースProxyサーバに，キャッシュとして保存される．リバースProxyサーバの説明を参照せよ．</p>
</div>
<div class="section" id="id66">
<h4>・ブラウザによるキャッシュ機能<a class="headerlink" href="#id66" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>クライアントのブラウザに，キャッシュとして保存される．</p>
<p><img alt="ブラウザのキャッシュ" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%AE%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5.png" /></p>
</div>
</div>
<div class="section" id="pushpin-cookiecookie">
<h3>:pushpin: CookieプロトコルによるCookie情報の送受信<a class="headerlink" href="#pushpin-cookiecookie" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="cookie">
<h4>・Cookie情報の送受信の仕組み<a class="headerlink" href="#cookie" title="このヘッドラインへのパーマリンク">¶</a></h4>
<ol class="simple">
<li><p>最初，ブラウザはリクエストでデータを送信する．サーバはセッション変数（あるいはDB）にデータを格納する．</p></li>
<li><p>サーバは，レスポンスヘッダ情報のCookieプロトコルにCookie情報を埋め込んで送信する．</p></li>
<li><p>ブラウザは，そのCookie情報を保存する．</p></li>
<li><p>2回目以降のリクエストでは，ブラウザは，リクエストヘッダ情報のCookieプロトコルにCookie情報を埋め込んでサーバに送信する．サーバは，Cookie情報に紐づくクライアントのデータをReadする．</p></li>
</ol>
<p><img alt="Cookieの仕組み" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/Cookie%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.png" /></p>
</div>
</div>
<div class="section" id="pushpin-cookieid">
<h3>:pushpin: CookieプロトコルによるセッションIDの送受信<a class="headerlink" href="#pushpin-cookieid" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="id">
<h4>・セッションIDの送受信の仕組み<a class="headerlink" href="#id" title="このヘッドラインへのパーマリンク">¶</a></h4>
<ol class="simple">
<li><p>最初，ブラウザはリクエストでデータを送信する．サーバはセッション変数（あるいはDB）にデータを格納する．</p></li>
<li><p>サーバは，レスポンスヘッダ情報のCookieプロトコルにセッションIDを埋め込んで送信する．</p></li>
<li><p>ブラウザは，そのセッションIDを保存する．</p></li>
<li><p>2回目以降のリクエストでは，ブラウザは，リクエストヘッダ情報のCookieプロトコルにセッションIDを埋め込んでサーバに送信する．サーバは，セッションIDに紐づくクライアントのデータをReadする．</p></li>
</ol>
<p><img alt="セッションIDの仕組み" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3ID%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.png" /></p>
</div>
<div class="section" id="id67">
<h4>・セッションID送受信とページ遷移<a class="headerlink" href="#id67" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="セッションIdとページ遷移" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3Id%E3%81%A8%E3%83%9A%E3%83%BC%E3%82%B8%E9%81%B7%E7%A7%BB.png" /></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="OnPremisesAndCloudComputing.html" class="btn btn-neutral float-right" title="オンプレミスとクラウドコンピューティング" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="EncryptionTechnology.html" class="btn btn-neutral float-left" title="暗号化技術" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, hiroki

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>