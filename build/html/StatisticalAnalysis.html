

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>統計解析 &mdash; sphinx-tech-notebook 1.0.0 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="prev" title="イベント発火 〜 Webページ表示" href="ImplementationOnTheFrontSide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> sphinx-tech-notebook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">はじめに：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AboutThisSite.html">このサイトについて</a></li>
</ul>
<p class="caption"><span class="caption-text">PHP：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ObjectOrientedAnalysisAndDesign.html">オブジェクト指向分析と設計</a></li>
<li class="toctree-l1"><a class="reference internal" href="ObjectOrientedProgramming.html">オブジェクト指向プログラミング</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConceptAndImplementationOfRESTfulAPI.html">RESTful APIの概念と実装</a></li>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">テストの手法</a></li>
<li class="toctree-l1"><a class="reference internal" href="FrameworkAndLibrary.html">フレームワークとライブラリ</a></li>
<li class="toctree-l1"><a class="reference internal" href="MainAlgorithm.html">代表的なアルゴリズム</a></li>
</ul>
<p class="caption"><span class="caption-text">アーキテクチャ：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="DomainDrivenDesign.html">ドメイン駆動設計</a></li>
<li class="toctree-l1"><a class="reference internal" href="CQRS.html">CQRS</a></li>
</ul>
<p class="caption"><span class="caption-text">データベース：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OperatingDatabase.html">データベースの操作</a></li>
</ul>
<p class="caption"><span class="caption-text">セキュリティ：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MalwareAndCyberAttacks.html">Malwareとサイバー攻撃</a></li>
<li class="toctree-l1"><a class="reference internal" href="EncryptionTechnology.html">暗号化技術</a></li>
</ul>
<p class="caption"><span class="caption-text">ネットワーク：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HowTheInternetWorks.html">ネットワークの仕組み</a></li>
<li class="toctree-l1"><a class="reference internal" href="OnPremisesAndCloudComputing.html">オンプレミスとクラウドコンピューティング</a></li>
</ul>
<p class="caption"><span class="caption-text">仮想化技術：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ComparisonOfVirtualizationTechnologies.html">仮想化技術の比較</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreationOfVirtualServer(VirtualMachine)AndContainer.html">仮想サーバ(仮想マシン)とコンテナの構築</a></li>
</ul>
<p class="caption"><span class="caption-text">ソフトウェアとハードウェアの連携：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="WhatIsSoftware.html">ソフトウェアとは</a></li>
<li class="toctree-l1"><a class="reference internal" href="WhatIsHardware.html">ハードウェアとは</a></li>
</ul>
<p class="caption"><span class="caption-text">ハードウェアに対する命令：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MachineLanguageAndRadix.html">機械語と進数</a></li>
</ul>
<p class="caption"><span class="caption-text">組み込み機器：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="EmbeddedSystem.html">組み込み機器</a></li>
</ul>
<p class="caption"><span class="caption-text">システム開発：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="SystemDevelopmentFlow.html">システム開発の流れ</a></li>
</ul>
<p class="caption"><span class="caption-text">JavaScript：</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="PrototypeBasedObjectOriented.html">プロトタイプベースのオブジェクト指向</a></li>
<li class="toctree-l1"><a class="reference internal" href="ImplementationOnTheFrontSide.html">イベント発火 〜 Webページ表示</a></li>
</ul>
<p class="caption"><span class="caption-text">R言語：</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">統計解析</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">データ解析で気をつけること</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">01-01. 相関分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">02-01. 線形回帰分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin">:pushpin: 単回帰分析</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">・回帰方程式</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">:pushpin: 重回帰分析</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">・回帰方程式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">・分析例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">02-02. 非線形回帰分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">:pushpin: ロジスティック回帰分析</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">・回帰方程式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">・分析例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id14">03-01. 決定木分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id15">:pushpin: 分類木分析</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">・図解例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">・分析例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">04-01. 階層クラスタ分析</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">05-01. グラフ生成関数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushpin-ggplot">:pushpin: <code class="docutils literal notranslate"><span class="pre">ggplot()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sphinx-tech-notebook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>統計解析</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/StatisticalAnalysis.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>統計解析<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="id2">
<h2>データ解析で気をつけること<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol class="simple">
<li><p>データ分析によって，何を明らかにしたいのか．</p></li>
<li><p>明らかにすることのために，どのデータ分析が必要なのか．</p></li>
<li><p>必要なデータ分析のために，どんな形式のデータを用意する必要があるのか．</p></li>
</ol>
</div>
<div class="section" id="id3">
<h2>01-01. 相関分析<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>データに，どの程度の直線的関係があるかを検出する分析手法．回帰分析を行うか否かの判断材料になる．</p>
<p><img alt="相関分析" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E7%9B%B8%E9%96%A2%E5%88%86%E6%9E%90.png" /></p>
<p><strong>【分析例】</strong></p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample</span> <span class="o">&lt;-</span> <span class="nf">read.table</span><span class="p">(</span><span class="s">&quot;sample_edit.txt&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># 純広告とCV_純広告の散布図を作成．</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> 純広告<span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">CV_純広告</span><span class="p">))</span>
<span class="n">g</span> <span class="o">&lt;-</span> <span class="n">g</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">()</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c1"># 純広告とCV_純広告の相関分析を行う．</span>
<span class="n">ts</span><span class="o">&lt;-</span><span class="nf">ts</span><span class="p">(</span><span class="n">sample[</span><span class="p">,</span><span class="m">2</span><span class="o">:</span><span class="m">5</span><span class="n">]</span><span class="p">)</span>
<span class="nf">cor</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s">&quot;pearson&quot;</span><span class="p">)</span>

<span class="c1"># 分析結果</span>
<span class="c1">#                    純広告      リスティング  CV_純広告    CV_リスティング</span>
<span class="c1"># 純広告           1.00000000    0.5247992  0.1065025     -0.09415535</span>
<span class="c1"># リスティング      0.52479919    1.0000000 -0.2360605      0.20821230</span>
<span class="c1"># CV_純広告        0.10650249   -0.2360605  1.0000000      0.19500011</span>
<span class="c1"># CV_リスティング  -0.09415535    0.2082123  0.1950001      1.00000000</span>
<span class="c1"># // 純広告とCV_純広告の間には，弱い直線的関係がある．</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>02-01. 線形回帰分析<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>因果関係がありそうなデータに対して，横軸を原因，また縦軸を結果とし，最も当てはまりの良い線形モデルを推定する分析手法．モデルの精度が高ければ因果関係の証明になり，またモデルに原因を代入することで結果を予測できる．</p>
<div class="section" id="pushpin">
<h3>:pushpin: 単回帰分析<a class="headerlink" href="#pushpin" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>原因と結果が一つずつと仮定した時に，最も当てはまりの良い線形モデルを推定できる．</p>
<img src = "https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/単回帰分析.png" width = 60%><div class="section" id="id5">
<h4>・回帰方程式<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="単回帰式" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E5%8D%98%E5%9B%9E%E5%B8%B0%E5%BC%8F.png" /></p>
<div class="section" id="id6">
<h5>分析例<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h5>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample</span> <span class="o">&lt;-</span> <span class="nf">read.table</span><span class="p">(</span><span class="s">&quot;sample_edit.txt&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
<span class="n">ts</span> <span class="o">&lt;-</span> <span class="nf">ts</span><span class="p">(</span><span class="n">sample[</span><span class="p">,</span><span class="m">2</span><span class="o">:</span><span class="m">5</span><span class="n">]</span><span class="p">)</span>

<span class="c1"># データ型を変更．</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>

<span class="c1"># CV_純広告と純広告に基づく線形回帰分析を行う．</span>
<span class="n">Reg</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">CV_純広告</span> <span class="o">~</span> 純広告<span class="p">,</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># 分析結果</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">Reg</span><span class="p">)</span>

<span class="c1"># Coefficients:</span>
<span class="c1">#              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="c1"># (Intercept) 1.099e+01  2.405e+00   4.571 3.11e-05 *** </span>
<span class="c1"># 純広告      2.239e-05  2.927e-05   0.765    0.448</span>
<span class="c1"># // 純広告の回帰係数のp値 &gt; 0.05 より，因果関係がない可能性．</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id7">
<h3>:pushpin: 重回帰分析<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>原因が二つ以上で結果が一つと仮定した時に，最も当てはまりの良い線形モデルを推定できる．ただし，グラフでは，モデルは平面で表される．</p>
<p><img alt="重回帰分析" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E9%87%8D%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90.png" /></p>
<div class="section" id="id8">
<h4>・回帰方程式<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="重回帰式" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E9%87%8D%E5%9B%9E%E5%B8%B0%E5%BC%8F.png" /></p>
</div>
<div class="section" id="id9">
<h4>・分析例<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample</span> <span class="o">&lt;-</span> <span class="nf">read.table</span><span class="p">(</span><span class="s">&quot;sample_edit.txt&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="n">days</span> <span class="o">&lt;-</span> <span class="nf">weekdays</span><span class="p">(</span><span class="nf">as.Date</span><span class="p">(</span><span class="n">sample</span><span class="o">$</span><span class="n">DATE</span><span class="p">))</span>
<span class="n">sample1</span><span class="o">&lt;-</span><span class="nf">transform</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

<span class="nf">library</span><span class="p">(</span><span class="n">caret</span><span class="p">)</span>

<span class="c1"># 曜日をダミー変数に変換</span>
<span class="n">tmp</span> <span class="o">&lt;-</span> <span class="nf">dummyVars</span><span class="p">(</span><span class="o">~</span><span class="n">days</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">sample1</span><span class="p">)</span>
<span class="n">days1</span> <span class="o">&lt;-</span> <span class="nf">as.data.frame</span><span class="p">(</span><span class="nf">predict</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">sample1</span><span class="p">))</span>

<span class="c1"># 曜日の順番を整形</span>
<span class="n">days2</span> <span class="o">&lt;-</span> <span class="n">days1</span> <span class="n">[</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">)</span> <span class="n">]</span>

<span class="c1"># 広告データと曜日データを結合</span>
<span class="n">ts1</span> <span class="o">&lt;-</span> <span class="nf">cbind</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">days2</span><span class="p">)</span>

<span class="c1"># データ型を変更</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">ts1</span><span class="p">)</span>

<span class="c1"># 重回帰分析を行う．</span>
<span class="n">Reg</span><span class="o">&lt;-</span><span class="nf">lm</span><span class="p">(</span><span class="n">CV_純広告</span> <span class="o">~</span> <span class="n">days.月曜日</span><span class="o">+</span><span class="n">days.火曜日</span><span class="o">+</span><span class="n">days.水曜日</span><span class="o">+</span><span class="n">days.木曜日</span><span class="o">+</span><span class="n">days.金曜日</span><span class="p">,</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># 分析結果</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">Reg</span><span class="p">)</span>

<span class="c1"># Coefficients:</span>
<span class="c1">#             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="c1"># (Intercept)    8.857      1.007   8.797 1.69e-11 ***</span>
<span class="c1"># days.月曜日     5.286      1.744   3.031 0.003957 ** </span>
<span class="c1"># days.火曜日     4.893      1.670   2.930 0.005212 ** </span>
<span class="c1"># days.水曜日     6.143      1.670   3.679 0.000601 ***</span>
<span class="c1"># days.木曜日     5.893      1.670   3.529 0.000944 ***</span>
<span class="c1"># days.金曜日     4.393      1.670   2.631 0.011479 *  </span>
<span class="c1"># // 月，水，金の回帰係数のp値 &lt; 0.05 より，月水金で因果関係があり，火金で因果関係がない可能性．</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id10">
<h2>02-02. 非線形回帰分析<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>因果関係がありそうなデータに対して，横軸を原因，また縦軸を結果とし，最も当てはまりの良い非線形モデルを推定する分析手法．モデルの精度が高ければ因果関係の証明になり，またモデルに原因を代入することで結果を予測できる．非線形モデルを推定するためには，モデルを一般化し，一般化線形モデルとして処理する必要がある．</p>
<div class="section" id="id11">
<h3>:pushpin: ロジスティック回帰分析<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>説明変数が質的変数の場合に，最も当てはまりの良い非線形モデル（ロジスティック分布）を推定する．</p>
<img src = "https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/ロジスティック回帰分析.png" width = 70%><div class="section" id="id12">
<h4>・回帰方程式<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><img alt="ロジスティック回帰式" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E3%83%AD%E3%82%B8%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E5%9B%9E%E5%B8%B0%E5%BC%8F.png" /></p>
</div>
<div class="section" id="id13">
<h4>・分析例<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample</span><span class="o">&lt;-</span><span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;CV_data2.csv&quot;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="bp">T</span><span class="p">)</span>

<span class="c1"># リンク関数をロジットとし，非線形モデルを一般化する．</span>
<span class="n">result_lg</span> <span class="o">=</span> <span class="nf">glm</span><span class="p">(</span><span class="n">CP申込み</span> <span class="o">~</span> 性別<span class="o">+</span>経済関連<span class="p">,</span> <span class="n">sample</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">binomial</span><span class="p">)</span>

<span class="c1"># オッズ比を出力</span>
<span class="nf">exp</span><span class="p">(</span><span class="n">result_lg2</span><span class="o">$</span><span class="n">coefficients</span><span class="p">)</span>

<span class="c1"># オッズ比の出力結果</span>
<span class="c1"># (Intercept)        性別    経済関連 </span>
<span class="c1"># 0.08930881 14.98017457  1.75649720 </span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id14">
<h2>03-01. 決定木分析<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>データに対して，最も当てはまりの良い決定木モデルを推定する分析手法．</p>
<div class="section" id="id15">
<h3>:pushpin: 分類木分析<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>決定木モデルを分類モデルとして用いる場合の決定木分析．</p>
<div class="section" id="id16">
<h4>・図解例<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>赤い点：被験者が暑いと感じた日</p>
<p>青い点：被験者が暑くないと感じた日</p>
<p><img alt="決定木分析_1" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E6%B1%BA%E5%AE%9A%E6%9C%A8%E5%88%86%E6%9E%90_1.png" /></p>
<p><img alt="矢印_80x82" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E7%9F%A2%E5%8D%B0_80x82.jpg" /></p>
<p><img alt="決定木分析_2" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E6%B1%BA%E5%AE%9A%E6%9C%A8%E5%88%86%E6%9E%90_2.png" /></p>
</div>
<div class="section" id="id17">
<h4>・分析例<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;CV_data.csv&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># 識別値のidを説明変数から除いたうえで，決定木を構築．</span>
<span class="nf">library</span><span class="p">(</span><span class="n">rpart</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">&lt;-</span> <span class="nf">rpart</span><span class="p">(</span><span class="n">CV</span><span class="o">~</span><span class="n">AGE</span> <span class="o">+</span> <span class="n">SEX</span> <span class="o">+</span> <span class="n">AD</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">sample</span><span class="p">)</span>

<span class="c1"># partykitパッケージで決定木をグラフ化．</span>
<span class="nf">library</span><span class="p">(</span><span class="n">partykit</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="nf">as.party</span><span class="p">(</span><span class="n">tree</span><span class="p">),</span> <span class="n">tp_args</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># rattleとrpart.plotパッケージで決定木をグラフ化．</span>
<span class="nf">library</span><span class="p">(</span><span class="n">rattle</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">rpart.plot</span><span class="p">)</span>
<span class="nf">fancyRpartPlot</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id18">
<h2>04-01. 階層クラスタ分析<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>データを，似ている順に階層的にグループ化（クラスタリング）していく分析手法．データ間の同一性を明らかにすることができる．</p>
<p><img alt="階層クラスタ解析" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/%E9%9A%8E%E5%B1%A4%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%BF%E8%A7%A3%E6%9E%90.png" /></p>
<p><strong>【分析例】</strong></p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># データを読み込む．</span>
<span class="n">sample1</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;CV_data.csv&quot;</span><span class="p">)</span>

<span class="c1"># ダミー変数に変換するために必要な情報が格納されたリストを生成．</span>
<span class="nf">library</span><span class="p">(</span><span class="n">caret</span><span class="p">)</span>
<span class="n">tmp</span>  <span class="o">&lt;-</span>  <span class="nf">dummyVars</span><span class="p">(</span><span class="o">~</span><span class="n">.,</span>  <span class="n">data</span> <span class="o">=</span> <span class="n">sample1</span><span class="p">)</span>

<span class="c1"># リストを基に，sample1の質的変数をダミー変数に変換．</span>
<span class="n">sample1.dummy</span>  <span class="o">&lt;-</span>  <span class="nf">as.data.frame</span><span class="p">(</span><span class="nf">predict</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span>  <span class="n">sample1</span><span class="p">))</span>

<span class="c1"># id以外の列を標準化．</span>
<span class="n">scale.dummy</span> <span class="o">&lt;-</span> <span class="nf">scale</span><span class="p">(</span><span class="n">sample1.dummy[</span><span class="p">,</span> <span class="m">2</span><span class="o">:</span><span class="m">9</span><span class="n">]</span><span class="p">)</span>

<span class="c1"># 距離行列を計算．</span>
<span class="n">d1</span> <span class="o">&lt;-</span> <span class="nf">dist</span><span class="p">(</span><span class="n">scale.dummy</span><span class="p">)</span>

<span class="c1"># ウォード法による階層クラスター解析を行い，グラフ化．</span>
<span class="n">cluster1</span> <span class="o">&lt;-</span> <span class="nf">hclust</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s">&quot;ward.D2&quot;</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">cluster1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h2>05-01. グラフ生成関数<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pushpin-ggplot">
<h3>:pushpin: <code class="docutils literal notranslate"><span class="pre">ggplot()</span></code><a class="headerlink" href="#pushpin-ggplot" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ggplot()</span></code>：グラフのキャンバスを準備</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_XXX()</span></code>：グラフをプロット</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theme()</span></code>：グラフを追加加工</p></li>
</ol>
<p><img alt="ggplotの概念" src="https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/ggplot%E3%81%AE%E6%A6%82%E5%BF%B5.png" /></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="ImplementationOnTheFrontSide.html" class="btn btn-neutral float-left" title="イベント発火 〜 Webページ表示" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, hiroki

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>