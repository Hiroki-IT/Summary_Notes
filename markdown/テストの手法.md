# 目次

<!-- TOC -->

- [01-01. テストの種類](#01-01-テストの種類)
    - [:pushpin: テストの流れ](#pushpin-テストの流れ)
- [01-02. Unit Test（単体テスト）](#01-02-unit-test単体テスト)
    - [:pushpin: ブラックボックステスト](#pushpin-ブラックボックステスト)
    - [:pushpin: ホワイトボックステスト](#pushpin-ホワイトボックステスト)
- [01-03. Integration Test（結合テスト）](#01-03-integration-test結合テスト)
    - [:pushpin: Top-down テスト](#pushpin-top-down-テスト)
    - [:pushpin: Bottom-up テスト](#pushpin-bottom-up-テスト)
- [01-04. User Acceptance Test（総合テスト）](#01-04-user-acceptance-test総合テスト)
    - [:pushpin: 性能テスト](#pushpin-性能テスト)
    - [:pushpin: 負荷テスト](#pushpin-負荷テスト)
    - [:pushpin: 機能テスト](#pushpin-機能テスト)
- [01-05. Regression Test（リグレッションテスト）](#01-05-regression-testリグレッションテスト)
- [02-01. グラフによるテストの可視化](#02-01-グラフによるテストの可視化)
    - [:pushpin: 性能評価テスト](#pushpin-性能評価テスト)
    - [:pushpin: バグ管理図](#pushpin-バグ管理図)
- [03-01. PHPUnitによるテスト](#03-01-phpunitによるテスト)
    - [:pushpin: Unit Test](#pushpin-unit-test)
    - [:pushpin: Functional Test](#pushpin-functional-test)
    - [:pushpin: CIツールによるPHPUnitの自動実行](#pushpin-ciツールによるphpunitの自動実行)

<!-- /TOC -->
## 01-01. テストの種類

### :pushpin: テストの流れ

テストは、小さい範囲から大きい範囲へと移行していく。

![p491-3](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p491-3.jpg)

 

## 01-02. Unit Test（単体テスト）

関数やメソッドが適切に動くかを検証するテスト。

### :pushpin: ブラックボックステスト

実装内容は気にせず、入力に対して、適切な出力が行われているかを検証。

![p492-1](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p492-1.jpg)



### :pushpin: ホワイトボックステスト

実装内容が適切かを確認しながら、入力に対して、適切な出力が行われているかを検証。ホワイトボックステストには、以下の方法がある。何をテストするかに着目すれば、思い出しやすい。

![p492-2](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p492-2.jpg)

**【実装例】**

```
if (A = 1 && B = 1) {
　return X;
}
```

上記のif文におけるテストとして、以下の４つの方法が考えられる。基本的には、複数条件網羅が用いられる。

- **命令網羅（『全ての処理』が実行されるかをテスト）**

![p494-1](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p494-1.png)

全ての命令が実行されるかをテスト（ここでは処理は1つ）。

すなわち…

A = 1、B = 1 の時、```return X``` が実行されること。

- **判定条件網羅（『全ての判定』が実行されるかをテスト）**

![p494-2](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p494-2.png)

全ての判定が実行されるかをテスト（ここでは判定は```TRUE```か```FALSE```の2つ）。

すなわち…

A = 1、B = 1 の時、```return X``` が実行されること。
A = 1、B = 0 の時、```return X``` が実行されないこと。

- **条件網羅（『各条件の取り得る全ての値』が実行されるかをテスト）**

![p494-3](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p494-3.png)

各条件が、取り得る全ての値で実行されるかをテスト（ここでは、Aが0と1、Bが0と1になる組み合わせなので、2つ）

すなわち…

A = 1、B = 0 の時、```return X``` が実行されないこと。
A = 0、B = 1 の時、```return X``` が実行されないこと。

または、次の組み合わせでもよい。

A = 1、B = 1 の時、```return X``` が実行されること。
A = 0、B = 0 の時、```return X``` が実行されないこと。

- **複数条件網羅（『各条件が取り得る全ての値』、かつ『全ての組み合わせ』が実行されるかをテスト）**

![p494-4](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p494-4.png)

各条件が、取り得る全ての値で、かつ全ての組み合わせが実行されるかをテスト（ここでは4つ）

すなわち…

A = 1、B = 1 の時、```return X``` が実行されること。
A = 1、B = 0 の時、```return X``` が実行されないこと。
A = 0、B = 1 の時、```return X``` が実行されないこと。
A = 0、B = 0 の時、```return X``` が実行されないこと。

 

## 01-03. Integration Test（結合テスト）

単体テストの次に行うテスト。複数のモジュールを繋げ、モジュール間のインターフェイスが適切に動いているかを検証。

![結合テスト](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p491-1.jpg)

### :pushpin: Top-down テスト

上位のモジュールから下位のモジュールに向かって、結合テストを行う場合、下位には Stub と呼ばれるダミーモジュールを作成する。

![トップダウンテスト](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/トップダウンテスト.jpg)



### :pushpin: Bottom-up テスト

下位のモジュールから上位のモジュールに向かって、結合テストを行う場合、上位には Driver と呼ばれるダミーモジュールを作成する。

![ボトムアップテスト](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/ボトムアップテスト.jpg)



## 01-04. User Acceptance Test（総合テスト）

![p491-2](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p491-2.jpg)

結合テストの次に行うテスト。システム全体が適切に動いているかを検証。

### :pushpin: 性能テスト

### :pushpin: 負荷テスト

### :pushpin: 機能テスト



## 01-05. Regression Test（リグレッションテスト）

システムを変更した後、他のプログラムに悪影響を与えていないかを検証。

![p496](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/p496.jpg)



## 02-01. グラフによるテストの可視化

### :pushpin: 性能評価テスト

![スループットとレスポンスタイム](/Users/hiroki/Documents/Drive 1st/Programming/tech-notebook/image/スループットとレスポンスタイム.png)

性能を評価する時、アクセス数を段階的に増加させて数回の性能テストを実施し，その結果を組み合わせてグラフ化する。例えば、性能目標を，⁠スループット：50件／秒⁠、⁠レスポンスタイム：3秒以内とする。今回のグラフでは、スループット：50件／秒の時のレスポンスタイムは2秒である。したがって、このシステムは性能目標を達成していることがわかる。

- **Throughput**

  単位時間当たりに処理できる仕事数のこと。

- **Response time**

  コンピュータが処理を終えるまでに要する時間のこと。



### :pushpin: バグ管理図

プロジェクトの時、残存テスト数と不良摘出数（バグ発見数）を縦軸にとり、時間を横軸にとることで、バグ管理図を作成する。それぞれの曲線の状態から、プロジェクトの進捗状況を読み取ることができる。

![品質管理図](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/品質管理図.jpg)

不良摘出実績線（信頼度成長曲線）は、プログラムの品質の状態を表し、S字型でないものはプログラムの品質が良くないことを表す。

![信頼度成長曲線の悪い例](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/信頼度成長曲線の悪い例.jpg)



## 03-01. PHPUnitによるテスト

https://phpunit.readthedocs.io/ja/latest/assertions.html

### :pushpin: Unit Test

### :pushpin: Functional Test

### :pushpin: CIツールによるPHPUnitの自動実行

1. テストクラスを実装したうえで、新機能を設計実装する。

2. リポジトリへPushすると、CIツールがGituHubからブランチの状態を取得する。

3. CIツールによって、テストサーバの仮想化、インタプリタ、PHPUnitなどが自動実行される。

4. 結果を通知することも可能。

**【自動化ツールアプリ例】**

Circle CI、Jenkins

![継続的インテグレーション](https://raw.githubusercontent.com/Hiroki-IT/tech-notebook/master/markdown/image/継続的インテグレーション.png)







