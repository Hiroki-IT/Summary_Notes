# Infrastructure as Code

## 01. 仮想サーバ(仮想マシン)のコード化

### 仮想サーバの構築

#### ・コード化ツールの種類

詳しくは，仮想サーバ(仮想マシン)とコンテナの構築，のノートを参照．

| Provider名                |      | 特徴               |
| ------------------------- | ---- | ------------------ |
| Oracle VM VirtualBox      |      | ホスト型           |
| VMware vSphere Hypervisor |      | ハイパーバイザー型 |



### 仮想サーバの構成管理

#### ・コード化ツールの種類

| ツール名 | 対象のProvider |
| -------- | -------------- |
| Ansible  |                |
| Puppet   |                |
| Chef     |                |

#### ・Ansible

Ansibleでは，ymlの文法を用いて関数処理を実行できる．

| ファイル名   | 役割                                   |
| ------------ | -------------------------------------- |
| playbook.yml | ソフトウェアのインストールタスクの手順 |
| inventory/*  | 反映先のサーバの情報                   |
| group_vars/* | 複数のサーバへの設定                   |
| host_vars/*  | 単一のサーバへの設定                   |



## 02. コンテナのコード化

### コンテナの構築

#### ・コード化ツールの種類

詳しくは，仮想サーバ(仮想マシン)とコンテナの構築，のノートを参照．
| Provider名 |
| ---------- |
| Docker     |
| LXC        |
| OpenVZ     |



### コンテナの構成管理

#### ・コード化ツールの種類

| 名前              |
| ----------------- |
| Dockerfile        |
| Ansible Container |




## 03. クラウドインフラストラクチャのコード化

### クラウドインフラストラクチャオーケストレーション

#### ・コード化ツールの種類

| 名前                   | 対象のクラウド |
| ---------------------- | -------------- |
| Terraform              | いろいろ       |
| AWS CloudFormation     | AWS            |
| Azure Resource Manager | Azure          |

### Terraform

#### ・```plan```：

スクリプト実行時に，変数が定義されたファイルを実行すると，```variable```で宣言した変数に，値が格納される．

```bash
terraform plan -var-file="XXX.tfvars"
```